!function(){function t(t,e,a){"true"==a.DEBUG&&console.log(`ERROR: ${e}\r\n${t}`)}var e={displayName:"Pin Code Information",description:"Return details of the given country and pincode",properties:{"post code":{displayName:"Post Code",type:"string",description:"Post Code"},country:{displayName:"country",type:"string",description:"country"},"country abbreviation":{displayName:"country abbreviation",type:"string",description:"country abbreviation"},"place name":{displayName:"place name",type:"string",description:"place name"},longitude:{displayName:"longitude",type:"string",description:"longitude"},state:{displayName:"state",type:"string",description:"state"},"state abbreviation":{displayName:"state abbreviation",type:"string",description:"state abbreviation"},latitude:{displayName:"latitude",type:"string",description:"latitude"}},methods:{GetPinCodeInformation:{displayName:"Get Pin Code Information",type:"list",inputs:["country abbreviation","post code"],requiredInputs:["country abbreviation","post code"],outputs:["country abbreviation","post code","country","place name","longitude","state","state abbreviation","latitude"]}}};async function a(e,a,o,n){switch(e){case"GetPinCodeInformation":await async function(e,a,o){return new Promise((async(a,n)=>{try{let n,r={},s=[];var i=new XMLHttpRequest;let c,p=e=>{if(200===(i=e).status){if(n=JSON.parse(i.responseText),n.places.length>0)for(var c=0;c<n.places.length;c++)r={"post code":n["post code"],country:n.country,"country abbreviation":n["country abbreviation"],"place name":n.places[c]["place name"],longitude:n.places[c].longitude,state:n.places[c].state,"state abbreviation":n.places[c]["state abbreviation"],latitude:n.places[c].latitude},s.push(r);return console.log(s),postResult(s),void a()}400===i.status&&(t(n.error.message,"WorldUniversities.onexecuteGetPinCodeInformation",o),a())};c=(""!==e["country abbreviation"]&&void 0!==e["country abbreviation"]&&e["country abbreviation"],`${o.K2BaseUrl}/${e["country abbreviation"]}/${e["post code"]}`),await function(e,a,o,n){return new Promise(((i,r)=>{var s=new XMLHttpRequest;s.onreadystatechange=function(){try{if(4!==s.readyState)return;if(200!==s.status&&404!=s.status)throw new Error("Failed with status "+s.status+" statustext: "+s.statusText);n(s),i()}catch(t){console.log("executexhr error: "+t+" xhr.responseText: "+s.responseText),r(t)}},s.onerror=function(){Error("Failed with status "+s.status),t("executexhr onerror: Failed with status "+s.status,"HTTP Respnonse",e),r(new Error("Failed with status "+s.status))},console.log("executexhr "+a+" url: "+o),s.open(a,o),s.setRequestHeader("content-type","application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8"),s.send()}))}(o,"GET",c,p)}catch(e){t(`${e.message} \rError stack:${e.stack}`,"WorldUniversities.onexecuteGetPinCodeInformation",o),n(e)}}))}(a,0,n);break;default:throw new Error(`The method ${e} is not supported.`)}}metadata={systemName:"com.k2.PinCodeInformation",displayName:"JSSP - PinCodeInformation",description:"JSSP - PinCodeInformation",configuration:{MSGraphAPIURL:{displayName:"MS Graph API URL",type:"string",value:"https://graph.microsoft.com/v1.0/",required:!0},K2BaseUrl:{displayName:"K2 Base URL",type:"string",value:"https://api.zippopotam.us",required:!0},DEBUG:{displayName:"DEBUG",type:"boolean",value:!0}}},ondescribe=async function({configuration:t}){console.log("ondescribe"),postSchema({objects:{PinCodeInformation:e}})},onexecute=async function({objectName:t,methodName:e,parameters:o,properties:n,configuration:i}){switch(t){case"PinCodeInformation":await a(e,n,0,i);break;default:throw new Error("The object "+t+" is not supported.")}}}();
//# sourceMappingURL=JSSP.PinCodeInformation.jssp.map
