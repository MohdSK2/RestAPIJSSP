!function(){function e(e,t,s){"true"==s.DEBUG&&console.log(`ERROR: ${t}\r\n${e}`)}var t={displayName:"Tasks",description:"Tasks Details",properties:{itemCount:{displayName:"items Count",description:"total number of tasks records returned",type:"number"},serialNumber:{displayName:"Serial Number",description:"Serial Number",type:"string"},status:{displayName:"Status",description:"Status",type:"string"},taskStartDate:{displayName:"Task Start Date",description:"Task Start Date",type:"dateTime"},priority:{displayName:"Priority",description:"Priority",type:"number"},formURL:{displayName:"Form URL",description:"Form URL",type:"string"},viewFlowURL:{displayName:"View Flow URL",description:"View Flow URL",type:"string"},workflowID:{displayName:"Workflow ID",description:"Workflow ID",type:"number"},workflowName:{displayName:"Workflow Name",description:"Workflow Name",type:"string"},workflowDisplayName:{displayName:"Workflow Display Name",description:"Workflow Display Name",type:"string"},workflowCategory:{displayName:"Workflow Category",description:"Workflow Category",type:"string"},workflowInstanceID:{displayName:"Workflow Instance ID",description:"Workflow Instance ID",type:"number"},workflowInstanceFolio:{displayName:"Workflow Instance Folio",description:"Workflow Instance Folio",type:"string"},activityInstanceID:{displayName:"Activity Instance ID",description:"Activity Instance ID",type:"number"},activityInstanceDestinationID:{displayName:"Activity Instance Destination ID",description:"Activity Instance Destination ID",type:"number"},activityName:{displayName:"Activity Name",description:"Activity Name",type:"string"},eventName:{displayName:"Event Name",description:"Event Name",type:"string"}},methods:{getTasks:{displayName:"Get Worklist Items",type:"list",outputs:["serialNumber","status","taskStartDate","priority","formURL","viewFlowURL","workflowID","workflowName","workflowDisplayName","workflowCategory","workflowInstanceID","workflowInstanceFolio","activityInstanceID","activityInstanceDestinationID","activityName","eventName"]}}};async function s(t,s,a,r){switch(t){case"getTasks":await async function(t,s){return new Promise((async(t,a)=>{try{let a;var r=new XMLHttpRequest;let o,i=o=>{if(200===(r=o).status){let e=[];return a=JSON.parse(r.responseText),a.tasks.forEach((t=>{e.push({serialNumber:t.serialNumber})})),console.log(`Tasks For User:${e}`),postResult(a.tasks),void t()}400===r.status&&(e(a.error.message,"UserProvisionig.onexecuteGetTasks",s),t())};o=`${s.K2BaseUrl}Api/Workflow/V1/tasks`;await function(t,s,a,r){return new Promise(((o,i)=>{var n=new XMLHttpRequest;n.onreadystatechange=function(){try{if(4!==n.readyState)return;if(200!==n.status&&404!=n.status)throw new Error("Failed with status "+n.status+" statustext: "+n.statusText);r(n),o()}catch(e){console.log("executexhr error: "+e+" xhr.responseText: "+n.responseText),i(e)}},n.onerror=function(){Error("Failed with status "+n.status),e("executexhr onerror: Failed with status "+n.status,"HTTP Respnonse",t),i(new Error("Failed with status "+n.status))},console.log("executexhr "+s+" url: "+a),n.withCredentials=!0,n.open(s,a),n.setRequestHeader("content-type","application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8"),n.send()}))}(s,"GET",o,i)}catch(t){e(`${t.message} \rError stack:${t.stack}`,"Tasks.onexecuteGetTasks",s),a(t)}}))}(0,r);break;default:throw new Error(`The method ${t} is not supported.`)}}metadata={systemName:"com.k2.FuchsOilJSSPBroker",displayName:"JSSP - K2 REST API",description:"JSSP - K2 REST API",configuration:{MSGraphAPIURL:{displayName:"MS Graph API URL",type:"string",value:"https://graph.microsoft.com/v1.0/",required:!0},K2BaseUrl:{displayName:"K2 Base URL",type:"string",value:"https://dev-fuchs.onk2.com/",required:!0},DEBUG:{displayName:"DEBUG",type:"boolean",value:!0}}},ondescribe=async function({configuration:e}){console.log("ondescribe"),postSchema({objects:{Tasks:t}})},onexecute=async function({objectName:e,methodName:t,parameters:a,properties:r,configuration:o}){switch(e){case"Tasks":await s(t,0,0,o);break;default:throw new Error("The object "+e+" is not supported.")}}}();
//# sourceMappingURL=JSSP.Fuchs.RESTAPI.jssp.map
