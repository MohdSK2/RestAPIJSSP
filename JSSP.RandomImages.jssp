!function(){function e(e,a,r,s){return new Promise(((o,i)=>{var n=new XMLHttpRequest;n.onreadystatechange=function(){try{if(4!==n.readyState)return;if(200!==n.status&&404!=n.status)throw new Error("Failed with status "+n.status+" statustext: "+n.statusText);s(n),o()}catch(e){console.log("executexhr error: "+e+" xhr.responseText: "+n.responseText),i(e)}},n.onerror=function(){Error("Failed with status "+n.status),t("executexhr onerror: Failed with status "+n.status,"HTTP Respnonse",e),i(new Error("Failed with status "+n.status))},console.log("executexhr "+a+" url: "+r),n.open(a,r),n.setRequestHeader("content-type","application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8"),n.send()}))}function t(e,t,a){"true"==a.DEBUG&&console.log(`ERROR: ${t}\r\n${e}`)}var a={displayName:"Random Images",description:"Return random images",properties:{id:{displayName:"id",type:"number",description:"id"},author:{displayName:"author",type:"string",description:"author"},width:{displayName:"width",type:"number",description:"width"},height:{displayName:"height",type:"number",description:"name"},url:{displayName:"url",type:"string",description:"url"},download_url:{displayName:"download_url",type:"string",description:"download_url"}},methods:{GetImages:{displayName:"Get Images",type:"list",inputs:[],outputs:["id","author","width","height","url","download_url"]},GetImage:{displayName:"Get Image",type:"read",inputs:["id"],requiredInputs:["id"],outputs:["id","author","width","height","url","download_url"]}}};async function r(a,r,s,o){switch(a){case"GetImages":await async function(a,r,s){return new Promise((async(a,r)=>{try{let r,i={},n=[];var o=new XMLHttpRequest;let u,d=e=>{if(200===(o=e).status){if(r=JSON.parse(o.responseText),r.length>0)for(var u=0;u<r.length;u++)i={id:r[u].id,author:r[u].author,width:r[u].width,height:r[u].height,url:r[u].url,download_url:r[u].download_url},n.push(i);return console.log(n),postResult(n),void a()}400===o.status&&(t(r.error.message,"RandomImages.onexecuteGetImages",s),a())};u=`${s.K2BaseUrl}v2/list`,await e(s,"GET",u,d)}catch(e){t(`${e.message} \rError stack:${e.stack}`,"RandomImages.onexecuteGetImages",s),r(e)}}))}(0,0,o);break;case"GetImage":await async function(a,r,s){return new Promise((async(r,o)=>{try{let o,n={};var i=new XMLHttpRequest;let u,d=e=>{if(200===(i=e).status)return o=JSON.parse(i.responseText),n={id:o.id,author:o.author,width:o.width,height:o.height,url:o.url,download_url:o.download_url},console.log(n),postResult(n),void r();400===i.status&&(t(o.error.message,"RandomImages.onexecuteGetImage",s),r())};u=void 0!==a.id&&null!==a.id?`${s.K2BaseUrl}/id/${a.id}/info`:`${s.K2BaseUrl}/id/0/info`,await e(s,"GET",u,d)}catch(e){t(`${e.message} \rError stack:${e.stack}`,"RandomImages.onexecuteGetImage",s),o(e)}}))}(r,0,o);break;default:throw new Error(`The method ${a} is not supported.`)}}metadata={systemName:"com.k2.PinCodeInformation",displayName:"JSSP - PinCodeInformation",description:"JSSP - PinCodeInformation",configuration:{MSGraphAPIURL:{displayName:"MS Graph API URL",type:"string",value:"https://graph.microsoft.com/v1.0/",required:!0},K2BaseUrl:{displayName:"K2 Base URL",type:"string",value:"https://picsum.photos",required:!0},DEBUG:{displayName:"DEBUG",type:"boolean",value:!0}}},ondescribe=async function({configuration:e}){console.log("ondescribe"),postSchema({objects:{RandomImages:a}})},onexecute=async function({objectName:e,methodName:t,parameters:a,properties:s,configuration:o}){switch(e){case"RandomImages":await r(t,s,0,o);break;default:throw new Error("The object "+e+" is not supported.")}}}();
//# sourceMappingURL=JSSP.RandomImages.jssp.map
