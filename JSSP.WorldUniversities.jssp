!function(){function e(e,t,s){"true"==s.DEBUG&&console.log(`ERROR: ${t}\r\n${e}`)}var t={displayName:"World Universities",description:"Return a list of universities of a given country",properties:{domains:{displayName:"domains",type:"string",description:"domains"},web_pages:{displayName:"Web Pages",type:"string",description:"Web Pages"},name:{displayName:"University Name",type:"string",description:"University Name"},alpha_two_code:{displayName:"alpha_two_code",type:"string"},"state-province":{displayName:"state-province",type:"string",description:"state-province"},country:{displayName:"country",type:"string",description:"country"},countryInput:{displayName:"countryInput",type:"string",description:"Enter country name"}},methods:{GetUniversitiesList:{displayName:"Get Universities List",type:"list",inputs:["countryInput"],requiredInputs:["countryInput"],outputs:["domains","web_pages","name","alpha_two_code","state-province","country"]}}};async function s(t,s,r,i){switch(t){case"GetUniversitiesList":await async function(t,s,r){return new Promise((async(s,i)=>{try{let i,a={},o=[];var n=new XMLHttpRequest;let c,p=t=>{if(200===(n=t).status){if(i=JSON.parse(n.responseText),i.length>0)for(var c=0;c<i.length;c++)a={domains:i[c].domains[0],web_pages:i[c].web_pages[0],name:i[c].name,alpha_two_code:i[c].alpha_two_code,"state-province":i[c]["state-province"],country:i[c].country},o.push(a);return console.log(o),postResult(o),void s()}400===n.status&&(e(i.error.message,"WorldUniversities.onexecuteGetUniversitiesList",r),s())};c=(""!==t.countryInput&&void 0!==t.countryInput&&t.countryInput,`${r.K2BaseUrl}search?country=${t.countryInput}`),await function(t,s,r,i){return new Promise(((n,a)=>{var o=new XMLHttpRequest;o.onreadystatechange=function(){try{if(4!==o.readyState)return;if(200!==o.status&&404!=o.status)throw new Error("Failed with status "+o.status+" statustext: "+o.statusText);i(o),n()}catch(e){console.log("executexhr error: "+e+" xhr.responseText: "+o.responseText),a(e)}},o.onerror=function(){Error("Failed with status "+o.status),e("executexhr onerror: Failed with status "+o.status,"HTTP Respnonse",t),a(new Error("Failed with status "+o.status))},console.log("executexhr "+s+" url: "+r),o.open(s,r),o.setRequestHeader("content-type","application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8"),o.send()}))}(r,"GET",c,p)}catch(t){e(`${t.message} \rError stack:${t.stack}`,"WorldUniversities.onexecuteGetUniversitiesList",r),i(t)}}))}(s,0,i);break;default:throw new Error(`The method ${t} is not supported.`)}}metadata={systemName:"com.k2.WorldUniversities",displayName:"JSSP - WorldUniversities",description:"JSSP - WorldUniversities",configuration:{MSGraphAPIURL:{displayName:"MS Graph API URL",type:"string",value:"https://graph.microsoft.com/v1.0/",required:!0},K2BaseUrl:{displayName:"K2 Base URL",type:"string",value:"http://universities.hipolabs.com/",required:!0},DEBUG:{displayName:"DEBUG",type:"boolean",value:!0}}},ondescribe=async function({configuration:e}){console.log("ondescribe"),postSchema({objects:{WorldUniversities:t}})},onexecute=async function({objectName:e,methodName:t,parameters:r,properties:i,configuration:n}){switch(e){case"WorldUniversities":await s(t,i,0,n);break;default:throw new Error("The object "+e+" is not supported.")}}}();
//# sourceMappingURL=JSSP.WorldUniversities.jssp.map
